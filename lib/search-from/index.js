!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("antd"),require("@ant-design/icons"),require("lodash-es"),require("classnames"),require("moment")):"function"==typeof define&&define.amd?define(["exports","react","antd","@ant-design/icons","lodash-es","classnames","moment"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["mj-tools"]={},e.react,e.antd,e["@ant-design/icons"],e["lodash-es"],e.classnames,e.moment)}(this,(function(e,t,n,a,r,s,l){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(t),c=o(s),d=o(l),u=function(){return u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)};function f(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}var m={labelCol:{span:4,sm:6,lg:8,xl:8,xxl:8},wrapperCol:{span:19,sm:18,lg:18,xl:18,xxl:18}},p={labelCol:{span:4,sm:4,lg:4,xl:4,xxl:4},wrapperCol:{span:19,sm:18,lg:18,xl:18,xxl:18}},h={wrapperCol:{span:24,sm:24,lg:24,xl:24,xxl:24}},v=function(e,t){if(void 0===t&&(t="onley"),g(e)){if(0===e.length)return!0;if("onley"===t){for(var n=0;n<e.length;n++){var a=e[n];if(v(a))return!0}return!1}var r=0;for(n=0;n<e.length;n++){a=e[n];v(a)&&r++}return r===e.length}return!e||""===e},g=function(e){return"[object Array]"===Object.prototype.toString.call(e)},y=function(e){var t=e.label,a=e.labelminwidth,r=void 0===a?60:a,s=e.children,l=f(e,["label","labelminwidth","children"]),o=t;return o&&"string"==typeof o&&(o=i.default.createElement("span",{style:{minWidth:r}},t)),i.default.createElement(n.Form.Item,u({label:o},l),s)},w=function(e){return isNaN(e)&&!isNaN(Date.parse(e))},b=null,O=function(e){var s=e.collapsed,l=void 0!==s&&s,o=e.nolabel,y=void 0!==o&&o,w=e.collapsedlen,O=void 0===w?4:w,j=e.hiddenReset,x=void 0!==j&&j,E=e.children,N=e.layout,S=e.searchText,_=void 0===S?"查询":S,I=e.resetText,F=void 0===I?"重置":I,C=e.savesearchparam,D=e.fielddatafromat,T=e.forwardRef,P=e.containerDom;e.onFinish;var R=e.onValuesChange,q=e.onFinishData,k=f(e,["collapsed","nolabel","collapsedlen","hiddenReset","children","layout","searchText","resetText","savesearchparam","fielddatafromat","forwardRef","containerDom","onFinish","onValuesChange","onFinishData"]),J=n.Form.useForm()[0],z=t.useState(l),V=z[0],W=z[1],A=t.useState(O),B=A[0],L=A[1],M=t.useRef();t.useEffect((function(){U(),window.addEventListener("resize",U);var e=window.sessionStorage.getItem("search_params_session_".concat(C));return v(e)&&window.sessionStorage.setItem("search-from-values",JSON.stringify(k.initialValues||{})),function(){b&&(clearTimeout(b),b=null);var e=window.sessionStorage.getItem("search_params_session_".concat(C));v(e)&&window.sessionStorage.removeItem("search-from-values"),window.removeEventListener("resize",U)}}),[]),t.useEffect((function(){M.current?P&&U(!0):M.current=!0}),[P]);var U=function(e){if(b&&!e)return!1;var t=document.documentElement.clientWidth-200;P&&(t=P.clientWidth);var n=O||4;t<900?n-=3:t>=900&&t<1200?n-=2:t>=1200&&t<1450&&(n-=1),n!==B&&L(n),b=setTimeout((function(){clearTimeout(b),b=null}),300)},G=function(e,t){if(D){var n=null==D?void 0:D.find((function(t){return t.name===e}));return"time"===(null==n?void 0:n.type)?g(t)?[d.default(t[0]),d.default(t[1])]:d.default(t):"number"===(null==n?void 0:n.type)?Number(t):t}return t},H=function(e,t){C&&("reset"===e?window.sessionStorage.removeItem("search_params_session_".concat(C)):window.sessionStorage.setItem("search_params_session_".concat(C),JSON.stringify(t))),q&&q(t,e),R&&R({},t)},K=function(){W(!V)},Q=function(e){var t=[],n=[],a=!1,r=1;return e.forEach((function(e){r>B?e.props&&e.props.hidden?n.push({child:e,hidden:!0}):(n.push({child:e,hidden:!1}),a=!0,r++):e.props&&e.props.hidden?t.push({child:e,hidden:!0}):(t.push({child:e,hidden:!1}),r++)})),[t,n,a]}(g(E)?E:[E]),X=Q[0],Y=Q[1],Z=Q[2],$=m;return y?$=h:"horizontal"===N&&($=p),i.default.createElement(n.Form,u({ref:T,form:J,layout:N||"inline",onFinish:function(e){return H("submit",e)},className:"search-container"},$,k),i.default.createElement("div",{className:"sj-search-content"},i.default.createElement("div",{className:"sj-search-left-content"},i.default.createElement("div",{className:"sj-search-row"},X.map((function(e,t){return i.default.createElement("div",{className:c.default("sj-search-col-".concat(B),{"sj-search-col-hidden":e.hidden}),key:t},e.child)}))),i.default.createElement("div",{className:c.default("sj-search-row",{"search-container-collapsed-col-show":V,"search-container-collapsed-col-hidden":!V})},Y.map((function(e,t){return i.default.createElement("div",{className:c.default("sj-search-col-".concat(B),{"sj-search-col-hidden":e.hidden}),key:t},e.child)})))),i.default.createElement("div",{className:"sj-search-right-content"},i.default.createElement(n.Space,{size:10,style:{float:"right"},className:"search-container-collapsed-content"},!x&&i.default.createElement(n.Button,{onClick:function(){var e=window.sessionStorage.getItem("search-from-values")||"{}";if(v(e))J.resetFields();else{var t=JSON.parse(e),n=[],a=J.getFieldsValue();for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(D?(t[s]=G(s,t[s]),n.push({name:s,value:G(s,t[s])})):isNaN(t[s])&&!isNaN(Date.parse(t[s]))?(t[s]=d.default(t[s]),n.push({name:s,value:d.default(t[s])})):n.push({name:s,value:t[s]}));H("reset",r.cloneDeep(t)),J.setFields(n)}}},F),i.default.createElement(n.Button,{type:"primary",htmlType:"submit"},_),Z&&!V&&i.default.createElement("span",{className:"search-container-collapsed-text",onClick:K},"展开",i.default.createElement(a.DownOutlined,null)),Z&&V&&i.default.createElement("span",{className:"search-container-collapsed-text",onClick:K},"收起",i.default.createElement(a.UpOutlined,null))))))},j=t.forwardRef((function(e,t){return i.default.createElement(O,u({},e,{forwardRef:t}))}));j.Item=y,e.Item=y,e.default=j,e.getSearchSaveParam=function(e,t,n){void 0===t&&(t={}),n&&window.sessionStorage.setItem("search-from-values",JSON.stringify(r.cloneDeep(n)));var a=window.sessionStorage.getItem("search_params_session_".concat(e))||"{}";if(!v(a)){var s=JSON.parse(a);for(var l in s)if(Object.prototype.hasOwnProperty.call(s,l))if(w(s[l]))s[l]=d.default(s[l]);else if("[object Array]"===Object.prototype.toString.call(s[l])&&2===s[l].length){var o=s[l],i=o[0],c=o[1];w(i)&&(s[l][0]=d.default(i),s[l][1]=d.default(c))}return s=Object.assign(s,t),r.cloneDeep(s)}return t},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
